var BLACK = [50/255, 50/255, 50/255];
var BROWN = [202/255, 141/255, 72/255];

var barcelona_chair = function(color){

	//skeleton - legs
	var points000 = [[4.59, 3.84, 0], [4.79, 3.7, 0], [3.66, 3.21, 0], [3.05, 3.29, 0]];
	var points001 = [[4.78, 3.68, 0], [4.66, 3.84, 0], [4.15, 3.21, 0], [3.06, 3.26, 0]]
	var legs00 = bs2([points000, points001]);

	var points002 = [[4.78, 3.68, 0], [5.11, 3.37, 0], [5.32, 3.2, 0], [5.81, 3.17, 0]];
	var points003 = [[4.76, 3.77, 0], [5.09, 3.46, 0], [5.29, 3.23, 0], [5.84, 3.21, 0]];
	var legs01 = bs2([points002, points003]);

	var points004 = [[4.76, 3.77, 0], [4.75, 3.89, 0], [5.77, 4.4, 0], [5.88, 5.84, 0]];
	var points005 = [[4.66, 3.87, 0], [4.75, 3.75, 0], [5.78, 4.64, 0], [5.84, 5.85, 0]];
	var legs02 = bs2([points004, points005]);

	var points006 = [[4.66, 3.87, 0], [4.48, 3.94, 0], [4.2, 4.4, 0], [3.18, 4.51, 0]];
	var points007 = [[4.62, 3.8, 0], [4.61, 3.83, 0], [4.21, 4.35, 0], [3.19, 4.48, 0]];
	var legs03 = bs2([points006, points007]);
	
	var legs04 = SIMPLICIAL_COMPLEX([[4.62, 3.8, 0], [4.66, 3.87, 0], [4.78, 3.68, 0], [4.76, 3.77, 0]])([[0, 1, 2],[1, 2, 3]]);
	var legs05 = SIMPLICIAL_COMPLEX([[3.05, 3.29, 0], [3.06, 3.26, 0], [3.05, 3.29, 0.1], [3.06, 3.26, 0.1]])([[0, 1, 2],[1, 2, 3]]);
	var legs06 = SIMPLICIAL_COMPLEX([[5.81, 3.17, 0], [5.84, 3.21, 0], [5.81, 3.17, 0.1], [5.84, 3.21, 0.1]])([[0, 1, 2],[1, 2, 3]]);
	var legs07 = SIMPLICIAL_COMPLEX([[5.88, 5.84, 0], [5.84, 5.85, 0], [5.88, 5.84, 0.1], [5.84, 5.85, 0.1]])([[0, 1, 2],[1, 2, 3]]);
	var legs08 = SIMPLICIAL_COMPLEX([[3.18, 4.51, 0], [3.19, 4.48, 0], [3.18, 4.51, 0.1], [3.19, 4.48, 0.1]])([[0, 1, 2],[1, 2, 3]]);

	var legs09 = STRUCT([legs00, legs01, legs02, legs03, legs04]);

	var points010 = [[4.59, 3.84, 0.1], [4.79, 3.7, 0.1], [3.66, 3.21, 0.1], [3.05, 3.29, 0.1]];
	var legs10 = bs2([points000, points010]);

	var points011 = [[4.78, 3.68, 0.1], [4.66, 3.84, 0.1], [4.15, 3.21, 0.1], [3.06, 3.26, 0.1]];
	var legs11 = bs2([points001, points011]);

	var points012 = [[4.78, 3.68, 0.1], [5.11, 3.37, 0.1], [5.32, 3.2, 0.1], [5.81, 3.17, 0.1]];
	var legs12 = bs2([points002, points012]);

	var points013 = [[4.76, 3.77, 0.1], [5.09, 3.46, 0.1], [5.29, 3.23, 0.1], [5.84, 3.21, 0.1]];
	var legs13 = bs2([points003, points013]);

	var points014 = [[4.76, 3.77, 0.1], [4.75, 3.89, 0.1], [5.77, 4.4, 0.1], [5.88, 5.84, 0.1]];
	var legs14 = bs2([points004, points014]);

	var points015 = [[4.66, 3.87, 0.1], [4.75, 3.75, 0.1], [5.78, 4.64, 0.1], [5.84, 5.85, 0.1]];
	var legs15 = bs2([points005, points015]);

	var points016 = [[4.66, 3.87, 0.1], [4.48, 3.94, 0.1], [4.2, 4.4, 0.1], [3.18, 4.51, 0.1]];
	var legs16 = bs2([points006, points016]);
	var points017 = [[4.62, 3.8, 0.1], [4.61, 3.83, 0.1], [4.21, 4.35, 0.1], [3.19, 4.48, 0.1]];
	var legs17 = bs2([points007, points017]);

	var legs0 = STRUCT([legs05, legs06, legs07, legs08, legs09, legs10, legs11, 
		legs12, legs13, legs14, legs15, legs16, legs17, T([2])([0.1]), legs09]);

	var legs18 = SIMPLICIAL_COMPLEX([[3.19, 4.48, 0.1], [3.19, 4.48, 0.1+2.48], [3.18, 4.51, 0.1], [3.18, 4.51, 0.1+2.48]])([[0, 1, 2],[1, 2, 3]]);
	var legs19 = SIMPLICIAL_COMPLEX([[3.19+0.12, 4.48-0.02, 0.1], [3.19+0.12, 4.48-0.02, 0.1+2.48], [3.18+0.12, 4.515-0.02, 0.1], [3.18+0.12, 4.515-0.02, 0.1+2.48]])([[0, 1, 2],[1, 2, 3]]);
	var legs20 = SIMPLICIAL_COMPLEX([[3.19, 4.48, 0.1], [3.19, 4.48, 0.1+2.48], [3.19+0.12, 4.48-0.02, 0.1], [3.19+0.12, 4.48-0.02, 0.1+2.48]])([[0, 1, 2],[1, 2, 3]]);
	var legs21 = SIMPLICIAL_COMPLEX([[3.18, 4.51, 0.1], [3.18, 4.51, 0.1+2.48], [3.18+0.12, 4.515-0.02, 0.1], [3.18+0.12, 4.515-0.02, 0.1+2.48]])([[0, 1, 2],[1, 2, 3]]);
	var legs1 = STRUCT([legs18, legs19, legs20, legs21]);

	var legs22 = SIMPLICIAL_COMPLEX([[5.88, 5.84, 0.1], [5.88, 5.84, 0.1+2.48], [5.84, 5.85, 0.1], [5.84, 5.85, 0.1+2.48]])([[0, 1, 2],[1, 2, 3]]);
	var legs23 = SIMPLICIAL_COMPLEX([[5.8768-0.01, 5.84-0.12, 0.1], [5.8768-0.01, 5.84-0.12, 0.1+2.48], [5.839-0.01, 5.85-0.12, 0.1], [5.839-0.01, 5.85-0.12, 0.1+2.48]])([[0, 1, 2],[1, 2, 3]]);
	var legs24 = SIMPLICIAL_COMPLEX([[5.88, 5.84, 0.1], [5.8768-0.01, 5.84-0.12, 0.1], [5.88, 5.84, 0.1+2.48], [5.8768-0.01, 5.84-0.12, 0.1+2.48]])([[0, 1, 2],[1, 2, 3]]);
	var legs25 = SIMPLICIAL_COMPLEX([[5.84, 5.85, 0.1], [5.839-0.01, 5.85-0.12, 0.1], [5.84, 5.85, 0.1+2.48], [5.839-0.01, 5.85-0.12, 0.1+2.48]])([[0, 1, 2],[1, 2, 3]]);
	var legs2 = STRUCT([legs22, legs23, legs24, legs25]);

	var legs26 = SIMPLICIAL_COMPLEX([[4.923, 4, 0.1], [4.923, 4, 0.1+2.48], [4.958, 3.98, 0.1], [4.958, 3.98, 0.1+2.48]])([[0, 1, 2],[1, 2, 3]]);
	var legs27 = SIMPLICIAL_COMPLEX([[4.875, 3.96, 0.1], [4.875, 3.96, 0.1+2.48], [4.892, 3.92, 0.1], [4.892, 3.92, 0.1+2.48]])([[0, 1, 2],[1, 2, 3]]);
	var legs28 = SIMPLICIAL_COMPLEX([[4.923, 4, 0.1], [4.875, 3.96, 0.1], [4.923, 4, 0.1+2.48], [4.875, 3.96, 0.1+2.48]])([[0, 1, 2],[1, 2, 3]]);
	var legs29 = SIMPLICIAL_COMPLEX([[4.958, 3.98, 0.1], [4.892, 3.92, 0.1], [4.958, 3.98, 0.1+2.48], [4.892, 3.92, 0.1+2.48]])([[0, 1, 2],[1, 2, 3]]);
	var legs3 = STRUCT([legs26, legs27, legs28, legs29]);

	var barcelona_legs = STRUCT([legs0, legs1, legs2, legs3, T([2])([0.1+2.48]), legs0]);

	//ropes
	var points018 = [[3.19+0.12, 4.46, 0.1], [3.189, 4.477, 0.1], [3.178, 4.515, 0.1], [3.19+0.12, 4.495, 0.1], 
	[4.923, 4, 0.1], [4.96, 3.98, 0.1], [4.905, 3.93, 0.1], [4.89, 3.915, 0.1], [4.875, 3.955, 0.1]];
	var ropeNUBS00 =  NUBS(S0)(1)([0,0,1,2,3,4,5,6,7,8,8])(points018);
	var points019 = [[3.19+0.12, 4.46, 0.22], [3.189, 4.477, 0.22], [3.178, 4.515, 0.22], [3.19+0.12, 4.495, 0.22], 
	[4.923, 4, 0.22], [4.96, 3.98, 0.22], [4.905, 3.93, 0.22], [4.89, 3.915, 0.22], [4.875, 3.955, 0.22]];
	var ropeNUBS01 = NUBS(S0)(1)([0,0,1,2,3,4,5,6,7,8,8])(points019);
	var points020 = [[3.19+0.12, 4.45, 0.1], [3.18, 4.47, 0.1], [3.165, 4.525, 0.1], [3.2+0.12, 4.51, 0.1], 
	[4.923, 4.02, 0.1], [4.985, 3.99, 0.1], [4.94, 3.95, 0.1], [4.87, 3.935, 0.1], [4.875, 3.95, 0.1]];
	var ropeNUBS02 =  NUBS(S0)(1)([0,0,1,2,3,4,5,6,7,8,8])(points020);
	var points021 = [[3.19+0.12, 4.45, 0.22], [3.18, 4.47, 0.22], [3.165, 4.525, 0.22], [3.2+0.12, 4.51, 0.22], 
	[4.923, 4.02, 0.22], [4.985, 3.99, 0.22], [4.94, 3.95, 0.22], [4.87, 3.935, 0.22], [4.875, 3.95, 0.22]];
	var ropeNUBS03 =  NUBS(S0)(1)([0,0,1,2,3,4,5,6,7,8,8])(points021);
	var rope01 = MAP(BEZIER(S1)([ropeNUBS00, ropeNUBS01]))(domain2D);
	var rope02 = MAP(BEZIER(S1)([ropeNUBS00, ropeNUBS02]))(domain2D);
	var rope03 = MAP(BEZIER(S1)([ropeNUBS01, ropeNUBS03]))(domain2D);
	var rope04 = MAP(BEZIER(S1)([ropeNUBS02, ropeNUBS03]))(domain2D);
	var ropes0 = STRUCT(REPLICA(9)([T([2])([0.012]), rope01, rope02, rope03, rope04, T([2])([0.12+0.01+0.15])]));

	var points022 = [[5.885, 5.85-0.12, 0.1], [5.9, 5.866, 0.1], [5.825, 5.865, 0.1], [5.72, 5.44, 0.1], [5.07, 4.09, 0.1], [4.97, 3.98, 0.1], [4.89, 3.915, 0.1], [4.875, 3.955, 0.1]];
	var ropeNUBS04 =  NUBS(S0)(1)([0,0,1,2,3,4,5,6,7,7])(points022);
	var points023 = [[5.885, 5.85-0.12, 0.25], [5.9, 5.86, 0.25], [5.825, 5.865, 0.25], [5.72, 5.44, 0.25], [5.07, 4.09, 0.25], [4.97, 3.98, 0.25], [4.89, 3.915, 0.25], [4.875, 3.955, 0.25]];
	var ropeNUBS05 = NUBS(S0)(1)([0,0,1,2,3,4,5,6,7,7])(points023);
	var points024 = [[5.875, 5.84-0.12, 0.1], [5.88, 5.84, 0.1], [5.84, 5.85, 0.1], [5.73, 5.44, 0.1], [5.08, 4.08, 0.1], [4.995, 3.99, 0.1], [4.87, 3.935, 0.1], [4.875, 3.95, 0.1]];
	var ropeNUBS06 =  NUBS(S0)(1)([0,0,1,2,3,4,5,6,7,7])(points024);
	var points025 = [[5.875, 5.84-0.12, 0.25], [5.88, 5.84, 0.25], [5.84, 5.85, 0.25], [5.73, 5.44, 0.25], [5.08, 4.08, 0.25], [4.995, 3.99, 0.25], [4.87, 3.935, 0.25], [4.875, 3.95, 0.25]];
	var ropeNUBS07 =  NUBS(S0)(1)([0,0,1,2,3,4,5,6,7,7])(points025);
	var rope05 = MAP(BEZIER(S1)([ropeNUBS04, ropeNUBS05]))(domain2D);
	var rope06 = MAP(BEZIER(S1)([ropeNUBS04, ropeNUBS06]))(domain2D);
	var rope07 = MAP(BEZIER(S1)([ropeNUBS05, ropeNUBS07]))(domain2D);
	var rope08 = MAP(BEZIER(S1)([ropeNUBS06, ropeNUBS07]))(domain2D);
	var ropes1 = T([2])([0.01])(STRUCT(REPLICA(8)([T([2])([0.012+0.12]), rope05, rope06, rope07, rope08, T([2])([0.15+0.01])])));

	var barcelona_ropes = STRUCT([COLOR([50/255, 50/255, 50/255]), ropes0, ropes1]);

	//pillows
	//bottom pillow
	var points026 = [[5.14, 4.24, 0], [3.23, 4.77, 0]];
	var points027 = [[5.1, 4.15, 0], [4.61, 4.26, 0], [3.64, 4.49, 0], [3.17, 4.69, 0]];
	var points028 = [[5.04, 4.08, 0], [3.16, 4.58, 0]];
	var pill00 = bs3([points026, points027, points028]);
	var points029 = [[5.14, 4.24, 2.7], [3.23, 4.77, 2.7]];
	var points030 = [[5.1, 4.15, 2.7], [4.61, 4.26, 2.7], [3.64, 4.49, 2.7], [3.17, 4.69, 2.7]];
	var points031 = [[5.04, 4.08, 2.7], [3.16, 4.58, 2.7]];
	var pill01 = bs3([points029, points030, points031]);
	var pill02 = bs3([[[5.14, 4.24, 0], [5.14, 4.24, 2.7]], [[5.1, 4.15, 0], [5.1, 4.15, 2.7]], [[5.04, 4.08, 0], [5.04, 4.08, 2.7]]]);
	var pill03 = bs3([[[3.23, 4.77, 0], [3.23, 4.77, 2.7]], [[3.17, 4.69, 0], [3.17, 4.69, 2.7]], [[3.16, 4.58, 0], [3.16, 4.58, 2.7]]]);
	var pill04 = bs2([points026, points029]);
	var pill05 = bs2([points028, points031]);

	var pillow00 = STRUCT([pill00, pill01, pill02, pill03, pill04, pill05]);

	//bottom pillow squares
	var points032 = [[3.69, 4.65, 0.27], [3.51, 4.88, 0.27], [3.45, 4.9, 0.27], [3.25, 4.77, 0.27]];
	var points033 = [[3.69, 4.65, 0], [3.25, 4.77, 0]];
	var points034 = [[3.69, 4.65, 0.54], [3.25, 4.77, 0.54]];
	var pill06 = bs3([points033, points032, points034]);

	var points035 = [[4.17, 4.51, 0.27], [4.16, 4.68, 0.27], [3.75, 4.83, 0.27], [3.69, 4.65, 0.27]];
	var points036 = [[4.17, 4.51, 0], [3.69, 4.65, 0]];
	var points037 = [[4.17, 4.51, 0.54], [3.69, 4.65, 0.54]];
	var pill07 = bs3([points036, points035, points037]);

	var points038 = [[4.17, 4.51, 0.27], [4.22, 4.67, 0.27], [4.67, 4.56, 0.27], [4.66, 4.37, 0.27]];
	var points039 = [[4.17, 4.51, 0], [4.66, 4.37, 0]];
	var points040 = [[4.17, 4.51, 0.54], [4.66, 4.37, 0.54]];
	var pill08 = bs3([points039, points038, points040]);

	var points041 = [[5.12, 4.25, 0.27], [5.03, 4.44, 0.27], [4.67, 4.56, 0.27], [4.66, 4.37, 0.27]];
	var points042 = [[5.12, 4.25, 0], [4.66, 4.37, 0]];
	var points043 = [[5.12, 4.25, 0.54], [4.66, 4.37, 0.54]];
	var pill09 = bs3([points042, points041, points043]);

	var pillow01 = STRUCT(REPLICA(5)([pill06, pill07, pill08, pill09, T([2])([0.54])]));
	var pillow_button00 = T([0, 1, 2])([3.69+0.01, 4.65+0.01, 0.54])(R([0, 1])([-PI/15])(R([1, 2])([PI/2])(CYLINDER(0.04, 0.01)([12, 1]))));
	var pillow_buttons_row0 = STRUCT([pillow_button00, T([0, 1])([4.17-3.7, 4.51-4.65]), pillow_button00, T([0, 1])([4.66-4.17, 4.37-4.51]), pillow_button00]);
	var pillow_buttons00 = STRUCT(REPLICA(4)([pillow_buttons_row0, T([2])([0.54])]));

	//back pillow
	var points044 = [[5.13, 4.28, 0], [5.36, 4.63, 0], [5.75, 5.46, 0], [5.79, 5.84, 0]];
	var points045 = [[5.04, 4.31, 0], [5.35, 4.81, 0], [5.56, 5.32, 0], [5.7, 5.9, 0]];
	var points046 = [[4.98, 4.35, 0], [5.24, 4.84, 0], [5.47, 5.36, 0], [5.61, 5.91, 0]];
	var pill10 = bs3([points044, points045, points046]);

	var points047 = [[5.13, 4.28, 2.7], [5.36, 4.63, 2.7], [5.75, 5.46, 2.7], [5.79, 5.84, 2.7]];
	var points048 = [[5.04, 4.31, 2.7], [5.35, 4.81, 2.7], [5.56, 5.32, 2.7], [5.7, 5.9, 2.7]];
	var points049 = [[4.98, 4.35, 2.7], [5.24, 4.84, 2.7], [5.47, 5.36, 2.7], [5.61, 5.91, 2.7]];
	var pill11 = bs3([points047, points048, points049]);

	var pill12 = bs3([[[5.13, 4.28, 0], [5.13, 4.28, 2.7]], [[5.04, 4.31, 0], [5.04, 4.31, 2.7]], [[4.98, 4.35, 0], [4.98, 4.35, 2.7]]]);
	var pill13 = bs3([[[5.79, 5.84, 0], [5.79, 5.84, 2.7]], [[5.7, 5.9, 0], [5.7, 5.9, 2.7]], [[5.61, 5.91, 0], [5.61, 5.91, 2.7]]]);
	var pill14 = bs2([points047, points044]);
	var pill15 = bs2([points046, points049]);
	var pillow02 = STRUCT([pill10, pill11, pill12, pill13, pill14, pill15]);

	//back pillow squares
	var points050 = [[4.98, 4.38, 0.27], [4.92, 4.45, 0.27], [5.08, 4.78, 0.27], [5.16, 4.72, 0.27]];
	var points051 = [[4.98, 4.38, 0], [5.16, 4.72, 0]];
	var points052 = [[4.98, 4.38, 0.54], [5.16, 4.72, 0.54]];
	var pill16 = bs3([points051, points050, points052]);

	var points053 = [[5.34, 5.11, 0.27], [5.26, 5.22, 0.27], [5.02, 4.72, 0.27], [5.16, 4.72, 0.27]];
	var points054 = [[5.34, 5.11, 0.54], [5.16, 4.72, 0.54]];
	var points055 = [[5.34, 5.11, 0], [5.16, 4.72, 0]];
	var pill17 = bs3([points054, points053, points055]);

	var points056 = [[5.34, 5.11, 0.27], [5.2, 5.13, 0.27], [5.41, 5.62, 0.27], [5.48, 5.52, 0.27]];
	var points057 = [[5.34, 5.11, 0], [5.48, 5.52, 0]];
	var points058 = [[5.34, 5.11, 0.54], [5.48, 5.52, 0.54]];
	var pill18 = bs3([points057, points056, points058]);

	var points059 = [[5.6, 5.89, 0.27], [5.5, 5.85, 0.27], [5.38, 5.54, 0.27], [5.48, 5.52, 0.27]];
	var points060 = [[5.6, 5.89, 0], [5.48, 5.52, 0]];
	var points061 = [[5.6, 5.89, 0.54], [5.48, 5.52, 0.54]];
	var pill19 = bs3([points060, points059, points061]);

	var pillow03 = STRUCT(REPLICA(5)([pill16, pill17, pill18, pill19, T([2])([0.54])]));
	var pillow_button01 = T([0, 1, 2])([5.16-0.01, 4.72, 0.54])(R([0, 1])([PI/2-PI/10])(R([1, 2])([PI/2])(CYLINDER(0.04, 0.01)([12, 1]))));
	var pillow_buttons_row1 = STRUCT([pillow_button01, T([0, 1])([5.16-4.99, 5.11-4.72]), pillow_button01, T([0, 1])([5.34-5.19, 5.52-5.11]), pillow_button01]);
	var pillow_buttons01 = STRUCT(REPLICA(4)([pillow_buttons_row1, T([2])([0.54])]));
	var barcelona_pillows = STRUCT([COLOR(color), pillow00, pillow01, pillow_buttons00, pillow02, pillow03, pillow_buttons01]);

	return STRUCT([barcelona_pillows, barcelona_ropes, barcelona_legs]);

}

//creazione e posizionamento

var barcelona_chair0 =  T([0,1,2])([43, 5.1, 77.5])(R([0, 2])([PI])(S([0,1,2])([1.25,1.25,1.25])(barcelona_chair(BROWN))));
DRAW(barcelona_chair0);

var barcelona_chair1 =  T([0,1,2])([47, 5.1, 76])(R([0, 2])([-PI/2])(S([0,1,2])([1.25,1.25,1.25])(barcelona_chair(BROWN))));
DRAW(barcelona_chair1);