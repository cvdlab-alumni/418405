GRID = SIMPLEX_GRID

//south

var southbalcony = T([0,1,2])([-2.2,0.5+9.1+0.3,0.14+2.36+0.04])(CUBOID([0.25,2,0.7]))

var s01 = GRID([[-0.5-2.2,0.5],[-0.5-3.6+0.7,0.7+1.7+1.5+0.5+1.8],[0.14+1,-1,0.36]])
var s02 = GRID([[-0.5-2.2,0.5],[-0.5-3.6+0.7,0.7+1.7,-1.5-0.5-1.8],[0.14+2.36]])

var s0 = STRUCT([s01,s02])

var s11 = GRID([[0.5],[0.5+9.1+0.5+1.8+0.5],[-0.14-2.36,0.14]])
var s12 = GRID([[0.5],[0.5,-3.6-1.7-1.5-0.5-1.8,+0.5,-1.6,+0.2+0.5],[-0.14-2.36-0.14,2]])
var s13 = GRID([[0.5],[0.5+9.1+0.5+1.8+0.5],[-0.14-2.36-0.14-2,0.36]])

var s1 = STRUCT([s11,s12,s13])

var s21 = T([2])([2.36+0.14])(s11)
var s22 = GRID([[0.5],[0.5,-3.6-1.7-1.5-0.5-1.8,+0.5+1.8+0.5],[-0.14-2.36-0.14-2.36-0.14,2]])
var s23 = T([2])([2.36+0.14])(s13)

var s2 = STRUCT([s21,s22,s23])

var s31 = GRID([[0.25],[0.5+9.1+0.5+1.8+0.5],[-0.14-2.36-0.14-2.36-0.14-2.36,0.14+0.5]])
var s32 = GRID([[0.25],[0.25,-0.25-9.1-0.25,0.25,-1.8-0.25,+0.25],[-0.14-2.36-0.14-2.36-0.14-2.36-0.14-0.5,1.5]])
var s33 = GRID([[0.25],[0.5+9.1+0.5+1.8+0.5],[-0.14-2.36-0.14-2.36-0.14-2.36-0.14-0.5-1.5,0.5+0.36]])

var s3 = STRUCT([s31,s32,s33])

var sroof = GRID([[0.25],[0.5+9.1+0.5+1.8+0.5],[((-0.14-2.36)*4),0.14+0.5]])

var south = STRUCT([s0,s1,s2,s3,southbalcony,sroof])

//north

var n01 = GRID([[-3.2-1.7,0.5],[-0.5-3.6+0.7,0.7],[0.14+1]])
var n02 = GRID([[-3.2-1.7,0.5],[-0.5-3.6+0.7,0.4,-0.3],[-0.14-1,1]])
var n03 = GRID([[-3.2-1.7,0.5],[-0.5-3.6+0.7,0.7],[-0.14-1-1,0.36]])

var n04 = GRID([[((-0.5-4.7)*3),0.5],[-0.5-3.6,1.7],[0.14+2]])
var n05 = GRID([[((-0.5-4.7)*3),0.5],[-0.5-3.6,1.7+1.5],[-0.14-2,0.36]])

function settore (alfa, r, R) {
  var domain = DOMAIN([[0,alfa],[r,R]])([36,1]);
  var mapping = function (v) {
    var a = v[0];
    var r = v[1];
    
    return [r*COS(a), r*SIN(a)];
  }
  var model = MAP(mapping)(domain);
  return model;
}

var sect1 = settore(PI, 2.05, 2.55)
var n06 = T([0,1])([-2.55+0.5+4.7+0.5+4.7+0.5+4.7+0.5+1.9,-2.55+0.5+9.1+0.5+1.8+0.5])(EXTRUDE([0.14+2.36])(sect1))
var sect2 = settore(PI, 0.6, 1.1)
var n07 = T([0,1])([-1.1+0.5+4.7-0.2,-1.1+0.5+3.6-0.7])(EXTRUDE([0.14+2.36])(sect2))

var n0 = STRUCT([n01,n02,n03,n04,n05,n06])

var n10 = GRID([[((-0.5-4.7)*4),0.5],[0.5+3.6+1.7+1.5+0.5+1.8+0.5+1.8+0.5],[-0.14-2.36,0.14]])
var n11 = GRID([[((-0.5-4.7)*4),0.5],[0.5+3.6+1.7+1.5+0.5+1.8+0.5+1.3,-0.5,0.5],[-0.14-2.36-0.14,1]])
var n12 = GRID([[((-0.5-4.7)*4),0.5],[0.5,-3.6-0.5-1.2-1.5-0.5-1.8-0.5-0.3,1,-0.5,0.5],[-0.14-2.36-0.14-1,1]])
var n13 = GRID([[((-0.5-4.7)*4),0.5],[0.5+3.6+1.7+1.5+0.5+1.8+0.5+1.3,-0.5,0.5],[-0.14-2.36-0.14-2,0.36]])

var n1 = STRUCT([n10,n11,n12,n13])

var n2 = T([2])([2.36+0.14])(n1)

var n3 = T([2])([2.36+0.14])(n2)

var nroof = GRID([[((-0.5-4.7)*4)-0.25,0.25],[0.5+3.6+1.7+1.5+0.5+1.8+0.5+1.8+0.5],[((-0.14-2.36)*4),0.14+0.5]])
var north = STRUCT([n0,n1,n2,n3,nroof])

//west

var w01 = GRID([[0.5+2.2+0.5+2+0.5+4.7+0.5+4.7+0.5,-0.5, +1.4],[0.5],[2.36+0.14]])
var w02 = GRID([[-0.5-2.2-0.5-2-0-.5-4.7-0.5-4.7-0.5, 0.5,-1.4],[0.5],[1.66,-0.5,0.2,0.14]])

var w11 = GRID([[0.5+2.2+0.5+2+0.5+4.7+0.5+4.7, -2,0.4+2.55+0.75],[0.5],[-2.36-0.14, 2.36+0.14]])
var w12 = GRID([[-0.5-2.2-0.5-2-0.5-4.7-0.5-4.7, 2,-0.4-2.55-0.75],[0.5],[-2.36-0.14, 1.16,-1,0.2+0.14]])

var w2 = GRID([[0.5+2.2+0.5+2+0.5+4.7+0.5+4.7+0.5, -0.25, 1, -0.25, 1.8+1.9],[0.5],[-2.36-0.14-2.36-0.14,2.36+0.14]])

var w31 = GRID([[0.5+4.7+0.5+4.7],[-0.25,0.25],[-2.36-0.14-2.36-0.14-2.36-0.14,2.36+0.14]])
var w32 = GRID([[-0.5-4.7-0.5-4.7,0.5+4.7+0.5+4.7+0.5],[0.5],[-2.36-0.14-2.36-0.14-2.36-0.14,2.36+0.14]])

var wroof = GRID([[0.5+4.7+0.5+4.7+0.5+4.7+0.5+4.7+0.5],[0.5],[-2.36-0.14-2.36-0.14-2.36-0.14-2.36-0.14, 0.5+0.14]])

var w = STRUCT([w01,w02,w11,w12,w2,w31,w32,wroof])
var west = T([2])([0.5+1.8+0.5+9.1])(w)

//east

var e1 = GRID([[-3.2-1.7,0.2+((0.5+4.7)*2)+0.5],[-0.5-3.6,0.5],[0.14+1,-1,0.36]])
var e2 = GRID([[-3.2-1.7,0.2+0.5+4.7,-0.5-4.7,0.5],[-0.5-3.6,0.5],[-0.14-1,1]])

var e3 = GRID([[10.9],[0.5],[-2.5,5.5+0.14]])

var e4 = GRID([[-10.9,4.7],[0.5],[-2.5,0.5,-1.5,0.36+0.14+0.5+0.14,-1.5,0.36+0.14+0.5]])

var e5 = GRID([[-10.9,-4.7,5.7],[0.5],[2.5,2.5,2.5,0.5+0.14]])
var e6 = GRID([[-10.4,0.5,-4.7,5.7],[0.5],[-7.5,2+0.14]])
var e7 = GRID([[21.3],[0.25],[-10+0.36,0.5]])

var eroof = GRID([[21.3],[0.25],[-10-0.14,0.5]])

var east = STRUCT([e1,e2,e3,e4,e5,e6,e7,eroof])

var vert_partitions = STRUCT([south,north,west_traslated,east])

var building = STRUCT([pillars,floors,vert_partitions])